<html>
	<head>
		<title>Test</title>
		
		<script src="fieldarray.js"></script>
		<script src="tetromino.js"></script>
		<script src="rendercanvas.js"></script>
		<script src="sprites.js"></script>
		<script>
			function showAll() {
				document.getElementById('imgdisplay').appendChild(blankBlock);
				document.getElementById('imgdisplay').appendChild(redBlock);
				document.getElementById('imgdisplay').appendChild(blueBlock);
				document.getElementById('imgdisplay').appendChild(greenBlock);
				document.getElementById('imgdisplay').appendChild(cyanBlock);
				document.getElementById('imgdisplay').appendChild(yellowBlock);
				document.getElementById('imgdisplay').appendChild(orangeBlock);
				document.getElementById('imgdisplay').appendChild(purpleBlock);
			}
			
			function draw() {
				var canvas = document.getElementById('canvas');
				var context = canvas.getContext("2d");
				var f = field;
				drawField(f, context);
			}
			
			function renderTest() {
				activateTetromino(new StraightPolyomino());
				insertTetromino();
				draw();
			}
			
			function moveLeft() {
				translateTetromino(I_TRANSLATION, -1);
				draw();
			}
			
			function moveRight() {
				translateTetromino(I_TRANSLATION, 1);
				draw();
			}
			
			function moveUp() {
				translateTetromino(J_TRANSLATION, 1);
				draw();
			}
			
			function moveDown() {
				translateTetromino(J_TRANSLATION, -1);
				draw();
			}
			
			function rotateRight() {
				rotateTetromino(ROTATE_CLOCKWISE);
				draw();
			}
			function rotateLeft() {
				rotateTetromino(ROTATE_C_CLOCKWISE);
				draw();
			}

			function initSprites() {
				initializeSpriteMap(charset, imgset);
			}
			
			function init() {
				initSprites();
				renderTest();
			}
		</script>
	</head>
	
	<body onload='init()'>
		<h1>Test</h1>
		<div id='imgdisplay'> </div>
		
		<canvas id="canvas" width=240 height=1008>
		</canvas>
		<p>Canvas end</p>
		<button onclick="draw()">Redraw</button>
		<p>
			<button onclick="moveLeft()">Left</button>
			<button onclick="moveRight()">Right</button>
		</p>
		<p>
			<button onclick="moveUp()">Up</button>
			<button onclick="moveDown()">Down</button>
		</p>
		<p>
			<button onclick="rotateLeft()"> <- </button>
			<button onclick="rotateRight()"> -> </button>
		</p>
	</body>
</html>